---
import battleship from "../assets/battleship.jpg";
import cookbook from "../assets/cookbook.jpg";
import movies from "../assets/movies.jpg";
import { Image } from "astro:assets";

interface ProjectItem {
  id: number;
  title: string;
  description: string;
  tech: string[];
  image: any;
  github: string;
  demo: string;
}

const projects: ProjectItem[] = [
  {
    id: 1,
    title: "Battleship Game",
    description:
      "Multiplayer Battleship game with real-time multiplayer functionality and a responsive UI.",
    tech: ["Vue.js", "Django", "SQLite"],
    image: battleship,
    github: "https://github.com/javierhwulin/Battleship-Game",
    demo: "#",
  },
  {
    id: 2,
    title: "CookBookApp",
    description:
      "Android recipe manager with offline caching, secure multi-device sync and MVVM clean architecture.",
    tech: ["Java", "Firebase", "MVVM"],
    image: cookbook,
    github: "https://github.com/javierhwulin/CookBookApp",
    demo: "#",
  },
  {
    id: 3,
    title: "imUB — Movie & Series Manager",
    description:
      "Desktop app to catalogue and track media libraries with optimised SQLite DAO layer (<150 ms queries).",
    tech: ["Java", "JavaFX", "SQLite", "MVVM"],
    image: movies,
    github: "https://github.com/javierhwulin/IMUB",
    demo: "#",
  },
];
---

<section id="projects" class="section-container projects-section">
  <div class="projects-header">
    <div class="header-content">
      <span class="section-label">(Projects)</span>
      <h2 class="section-title">Selected Work</h2>
    </div>
    <p class="header-subtitle">
      A showcase of projects I've built — each one taught me something new
    </p>
  </div>

  <div class="projects-grid">
    {
      projects.map((p, index) => (
        <article
          class="project-card"
          style={`--card-delay: ${index * 0.12}s`}
        >
          <div class="project-image-wrapper">
            <Image
              src={p.image}
              alt={p.title}
              widths={[480, 768, 1024, 1280]}
              sizes="(min-width: 1024px) 33vw, (min-width: 768px) 50vw, 100vw"
              loading="lazy"
              decoding="async"
              class="project-image"
            />
            <div class="image-overlay" />
          </div>

          <div class="project-content">
            <h3 class="project-title">{p.title}</h3>
            <p class="project-description">{p.description}</p>

            <div class="project-tech">
              {p.tech.map((t) => (
                <span class="tech-tag">{t}</span>
              ))}
            </div>

            <div class="project-links">
              <a
                href={p.github}
                target="_blank"
                rel="noopener noreferrer"
                class="project-link secondary-link"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                </svg>
                <span>Code</span>
              </a>
              {p.demo !== "#" && (
                <a
                  href={p.demo}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="project-link primary-link"
                >
                  <span>Live Demo</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M7 17L17 7" />
                    <path d="M7 7h10v10" />
                  </svg>
                </a>
              )}
            </div>
          </div>
        </article>
      ))
    }
  </div>
</section>

<style>
  .projects-section {
    padding-top: 6rem;
    padding-bottom: 6rem;
  }

  .projects-header {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 3rem;
  }

  @media (min-width: 768px) {
    .projects-header {
      flex-direction: row;
      justify-content: space-between;
      align-items: flex-end;
    }
  }

  .section-label {
    display: inline-block;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--color-accent);
    margin-bottom: 0.5rem;
  }

  .section-title {
    font-size: clamp(2.5rem, 5vw, 3.5rem);
    font-weight: 700;
    color: white;
    line-height: 1.1;
    margin: 0;
  }

  .header-subtitle {
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.6);
    max-width: 20rem;
    text-align: right;
  }

  @media (max-width: 767px) {
    .header-subtitle {
      text-align: left;
    }
  }

  /* Projects Grid */
  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
  }

  /* Project Card */
  .project-card {
    background: var(--surface);
    border: 1px solid var(--surface-border);
    border-radius: 1.5rem;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    animation: fadeSlideUp 0.6s ease-out both;
    animation-delay: var(--card-delay);
  }

  .project-card:hover {
    transform: translateY(-8px);
    border-color: rgba(255, 233, 177, 0.25);
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.35);
  }

  /* Project Image */
  .project-image-wrapper {
    position: relative;
    aspect-ratio: 16 / 10;
    overflow: hidden;
  }

  .project-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s ease;
  }

  .project-card:hover .project-image {
    transform: scale(1.05);
  }

  .image-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      to top,
      rgba(16, 12, 8, 0.6) 0%,
      rgba(16, 12, 8, 0.1) 50%,
      transparent 100%
    );
    pointer-events: none;
  }

  /* Project Content */
  .project-content {
    padding: 1.75rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
  }

  .project-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: white;
    margin-bottom: 0.75rem;
  }

  .project-description {
    font-size: 0.95rem;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.7);
    margin-bottom: 1.25rem;
    flex-grow: 1;
  }

  /* Tech Tags */
  .project-tech {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }

  .tech-tag {
    display: inline-flex;
    align-items: center;
    padding: 0.375rem 0.75rem;
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 2rem;
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.8);
  }

  /* Project Links */
  .project-links {
    display: flex;
    gap: 0.75rem;
    margin-top: auto;
  }

  .project-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.65rem 1.1rem;
    border-radius: 2rem;
    font-size: 0.875rem;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .secondary-link {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.15);
    color: rgba(255, 255, 255, 0.9);
  }

  .secondary-link:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.25);
  }

  .primary-link {
    background: var(--color-accent);
    color: var(--color-bg);
  }

  .primary-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(255, 233, 177, 0.25);
  }

  @keyframes fadeSlideUp {
    from {
      opacity: 0;
      transform: translateY(24px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (max-width: 768px) {
    .projects-section {
      padding-top: 4rem;
      padding-bottom: 4rem;
    }

    .projects-grid {
      gap: 1.5rem;
    }

    .project-content {
      padding: 1.5rem;
    }
  }
</style>
